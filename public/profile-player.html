<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Profile Upload</title>
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
></script>

<script>
  function showPrev(fileRef, prevRef) {
    const [file] = fileRef.files;
    if (file) {
      prevRef.src = URL.createObjectURL(file);
    }
  }

  function showPrev1(fileRef, prevRef) {
    const [file] = fileRef.files;
    if (file) {
      prevRef.src = URL.createObjectURL(file);
    }
  }

  $(document).ready(function () {
    $("#green").click(function () {
      let obj = {
        type: "get",
        url: "/get-ten",
        data: {
          email8: $("#email8").val(),
        },
      };

      $.ajax(obj)
        .then(function (responseJsonAry) {
          if (responseJsonAry.length > 0) {
            let data = responseJsonAry[0];
            $("#email8").val(data.emailid);
            $("#prev1").attr("src", data.acardpicurl || "photo/pics/allcus.png");
            $("#prev").attr("src", data.profilepic || "photo/pics/agent.jpg");
            $("#address").val(data.address);
            $("#contact").val(data.contact);
            $("#games").val(data.game);
            $("#textarea").val(data.info);
          } else {
            alert("No data found.");
          }
        })
        .fail(function (err) {
          alert("Error: " + err.message);
        });
    });
  });
</script>
</head>
<body>
<nav class="navbar bg-body-tertiary">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">Navbar</span>
  </div>
</nav>

<div>
  <center>
    <h3>Profile</h3>
  </center>
</div>

<div class="container">
  <form
    class="row g-3"
    action="/go-to-server-safe"
    method="post"
    enctype="multipart/form-data"
  >
    <div class="col-md-11">
      <label for="email8" class="form-label">Email ID</label>
      <input
        type="email"
        class="form-control"
        id="email8"
        name="emailid5"
        required
      />
      <button type="button" class="btn btn-primary mt-2" id="green">
        Get Data
      </button>
    </div>

    <div class="col-3">
      <label>Upload Aadhaar Card (Front)</label><br />
      <input
        type="file"
        name="adhaar"
        id="profilepic1"
        accept="image/*"
        onchange="showPrev1(profilepic1, prev1)"
        required
      />
      <br />
      <img
        src="photo/pics/allcus.png"
        width="100"
        height="100"
        id="prev1"
        alt="Aadhaar Preview"
      />
    </div>

    <div class="col-3">
      <label>Upload Profile Picture</label><br />
      <input
        type="file"
        name="profilePic"
        id="profilepic"
        accept="image/*"
        onchange="showPrev(profilepic, prev)"
        required
      />
      <br />
      <img
        src="photo/pics/agent.jpg"
        width="100"
        height="100"
        id="prev"
        alt="Profile Preview"
      />
    </div>

    <div class="col-12">
      <label for="address" class="form-label">Address</label>
      <input type="text" class="form-control" id="address" name="inputAddress2" />
    </div>

    <div class="col-5">
      <label for="contact" class="form-label">Contact number</label>
      <input type="text" class="form-control" id="contact" name="phone" />
    </div>

    <div class="col-md-3">
      <label for="games" class="form-label">Games You Play</label>
      <input type="text" class="form-control" id="games" name="games" />
    </div>

    <div class="mb-3 col-12">
      <label for="textarea" class="form-label">Additional Info</label>
      <textarea
        class="form-control"
        id="textarea"
        name="info"
        rows="3"
      ></textarea>
    </div>

    <div class="col-12">
      <button type="submit" class="btn btn-primary">Upload Data</button>
      <button type="submit" class="btn btn-primary" formaction="/update-users">
        Modify
      </button>
    </div>
  </form>
</div>

<nav class="navbar bg-body-tertiary mt-5">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">Navbar</span>
  </div>
</nav>
</body>
</html>
