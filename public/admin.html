<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    >
</script>
<script>
    var mymodule= angular.module("kuchModule",[]);
      
      mymodule.controller("kuchController",function($scope,$http)
      {

        $scope.jsonArray=[];

       $scope.doFetchAlls=function()
       {
            var url="/do-fetch-all-userss";

            
            $http.get(url).then(allGoodsFx,someBadsFx);
            function allGoodsFx(response)
            {
                //resp in JSON array
                //alert(JSON.stringify(response.data));
                $scope.jsonArray=response.data;
            }

            function someBadsFx(response)
            {
                alert(JSON.stringify(response.data));
            }
       }
       //----------------------
       $scope.dodeletes=function(emailid,status)
       {
        
            var url="/delete-ones?emailidKuch="+emailid+"&statusKuch="+status;
            
            $http.get(url).then(allGoodsFx,someBadsFx);
            function allGoodsFx(response)
            {
               alert(JSON.stringify(response.data));//resp in string
                $scope.doFetchAlls();
            }

            function someBadsFx(response)
            {
                alert(JSON.stringify(response.data));
            }
       }
       $scope.dodeletess=function(emailid,status)
       {
        
            var url="/delete-oness?emailidKuch="+emailid+"&statusKuch="+status;
            
            $http.get(url).then(allGoodsFx,someBadsFx);
            function allGoodsFx(response)
            {
               alert(JSON.stringify(response.data));//resp in string
                $scope.doFetchAlls();
            }

            function someBadsFx(response)
            {
                alert(JSON.stringify(response.data));
            }
       }

       


       })

    

</script>




</head>
<body  ng-app="kuchModule" ng-controller="kuchController" ng-init="doFetchAlls();"></body>
    <nav class="navbar bg-body-tertiary">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">Navbar</span>
  </div>
</nav>
<div><center><h3>Admin</h3></center></div>
<table class="table">
  <thead>
    <tr>
      <th scope="col">sr.No</th>
      <th scope="col">event</th>
      <th scope="col">date</th>
      <th scope="col">time</th>
      <th scope="col">Operations</th>
      
    </tr>
    <tr ng-repeat="obj in jsonArray">
    <td>{{$index+1}}</td>
    <td>{{obj.emailid}}</td>
    <td>{{obj.pwd}}</td>
    <td>{{obj.user}}</td>
    <td> <input type="button" ng-click="dodeletes(obj.emailid,obj.status);" value="blocked">
    </td>
    <td><input type="button" ng-click="dodeletess(obj.emailid,obj.status);" value="remove"></td>
  </tr>
  </thead>
  
  <tbody>

    
</table>
</div>
<nav class="navbar bg-body-tertiary" style="margin-top:200px;">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">Navbar</span>
  </div>
</nav>
</body>
</html>